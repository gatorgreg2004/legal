(window.__twttrll=window.__twttrll||[]).push([[4],{213:function(e,t,i){var n=i(180),a=i(18),r=i(72),o=i(179),s=i(182),l=i(6),d=i(5),c=i(22),u=i(0),m=i(171),h=i(214),p="220px",f="100%";e.exports=e.exports=m.couple(i(172),i(177),function(e){e.params({momentId:{required:!0},width:{required:!0,fallback:"100%",validate:s,transform:s},limit:{required:!1,transform:d.asInt},instanceId:{required:!0,fallback:c.deterministic},lang:{required:!0,transform:r.matchLanguage,fallback:"en"}}),e.selectors({tweetToScribe:".timeline-Tweet"}),e.around("scribeNamespace",function(e){return u.aug(e(),{page:"moment"})}),e.around("widgetDataAttributes",function(e){return u.aug({"moment-id":this.params.momentId},e())}),e.define("scribeTweetImpressions",function(){var e=o(this.select("tweetToScribe")),t=Object.keys(e),i=t.length?"results":"no_results";this.scribe({element:"initial",action:i},{item_ids:t,item_details:e})}),e.override("hydrate",function(){var e=this;return h.momentTimeline(this.params).then(function(t){e.html=t.html})}),e.override("render",function(){var e=this;return this.el=this.sandbox.htmlToElement(this.html),this.el?(this.el.lang=this.params.lang,l.all([this.sandbox.appendStyleSheet(n.moment(this.params.lang,this.params.theme)),this.sandbox.styleSelf({display:"block",maxWidth:f,width:this.params.width,minWidth:p})]).then(function(){return e.prepForInsertion(e.el),e.sandbox.injectWidgetEl(e.el)})):l.reject(new Error("unable to render"))}),e.override("show",function(){var e=this,t=this.sandbox;return this.sandbox.makeVisible().then(function(){return t.matchHeightToContent()}).then(function(){return a.read(function(){e.scribeTweetImpressions()})})}),e.last("resize",function(){return this.sandbox.matchHeightToContent()})})},214:function(e,t,i){var n=i(81),a=i(82),r=i(19),o=i(21),s=i(83),l=i(0),d=i(80),c=i(20),u=i(49);function m(e){if(!e||!e.headers)throw new Error("unexpected response schema");return u(),{html:e.body}}function h(e){if(e&&e.headers)throw new Error(e.headers.status);throw e instanceof Error?e:new Error(e)}e.exports={momentTimeline:function(e){var t=c.moment([e.momentId]),i=function(e){return(o.ios()||o.android()?"mobile_":"")+"moment_"+e.momentId+"_"+e.instanceId}(e),u={lang:e.lang,tz:s.getTimezoneOffset(),tweet_limit:e.limit,t:d(),dnt:r.enabled()},p=l.compact(u);return n.fetch(t,p,a,i).then(m,h)}}},216:function(e,t,i){var n,a,r=i(10),o=i(36),s=i(35),l=i(72),d=i(18),c=i(202),u=i(6),m="js-isGif",h="is-playing",p="is-mute",f="is-showingInterstitial";e.exports=function(e){e.params({lang:{required:!0,transform:l.matchLanguage,fallback:"en"}}),e.selectors({mediaAsset:".MediaCard-mediaAsset",wvpInterstitial:".js-playableMediaInterstitial",tweetIdInfo:".js-tweetIdInfo",playableMediaPlayer:".wvp-player-container",playableMediaRoot:".js-playableMediaRoot",playableMediaPlay:".js-playableMediaPlay",playableMediaMute:".js-playableMediaMute",playableMediaUnmute:".js-playableMediaUnmute"}),e.define("_findPlayableMediaRootEl",function(e){return e&&s.closest(this.selectors.playableMediaRoot,e)}),e.define("_getPlayerApiProxy",function(e){var t=this.selectOne(e,"playableMediaPlayer");return t?c.find(t):null}),e.define("_restoreLastMediaInterstitial",function(){var e,t;return n&&a?(e=a.firstElementChild,c.remove(e),t=s.closest(this.selectors.tweetIdInfo,e,this.el),d.write(function(){a.replaceChild(n,e),r.add(t,f)})):u.resolve()}),e.define("_replaceInterstitialWithMedia",function(e,t){var i=s.closest(this.selectors.tweetIdInfo,e,this.el);return u.all([this._restoreLastMediaInterstitial(),d.write(function(){n=e,a=e.parentNode,e.parentNode.replaceChild(t,e),r.remove(i,f)})])}),e.define("onInterstitialClick",function(e,t){var i,n,a=s.closest(this.selectors.mediaAsset,t,this.el),o=s.closest(this.selectors.tweetIdInfo,t,this.el),l=o.getAttribute("data-tweet-id"),d=(this.scribeNamespace()||{}).page,p=(this.scribeData()||{}).widget_origin,f=this.params.lang,b=(i=this.sandbox,(n=i.createElement("div")).className="MediaCard-mediaAsset",n),y=this.sandbox.createElement("div"),w={hideControls:!0,widgetOrigin:p,autoPlay:!0};return l?(e.preventDefault(),y.className="wvp-player-container",b.appendChild(y),this._replaceInterstitialWithMedia(a,b).then(function(){return c.insertForTweet(b,l,d,f,w)}).then(function(e){e&&(r.add(o,h),r.present(o,m)||e.on("playbackComplete",function(){r.remove(o,h)}))})):u.reject(new Error("No Tweet ID for player"))}),e.define("onPlayableMediaRootClick",function(e,t){var i,n=s.closest("A",e.target,this.el),a=this.sandbox.hasSelectedText();if(r.present(t,h)&&!n&&!a){if(!(i=this._getPlayerApiProxy(t)))return;o.stopImmediatePropagation(e),o.preventDefault(e),r.remove(t,h),i.pause()}}),e.define("onPlayButtonClick",function(e,t){var i=this._findPlayableMediaRootEl(t),n=this._getPlayerApiProxy(i);n&&(o.stopImmediatePropagation(e),o.preventDefault(e),r.add(i,h),n.play())}),e.define("onMuteButtonClick",function(e,t){var i=this._findPlayableMediaRootEl(t),n=this._getPlayerApiProxy(i);n&&(r.add(i,p),o.stopImmediatePropagation(e),o.preventDefault(e),n.mute())}),e.define("onUnmuteButtonClick",function(e,t){var i=this._findPlayableMediaRootEl(t),n=this._getPlayerApiProxy(i);n&&(r.remove(i,p),o.stopImmediatePropagation(e),o.preventDefault(e),n.unmute())}),e.after("render",function(){this.on("click","wvpInterstitial",this.onInterstitialClick),this.on("click","playableMediaRoot",this.onPlayableMediaRootClick),this.on("click","playableMediaPlay",this.onPlayButtonClick),this.on("click","playableMediaMute",this.onMuteButtonClick),this.on("click","playableMediaUnmute",this.onUnmuteButtonClick)})}},220:function(e,t,i){var n=i(207);e.exports=function(e){e.params({chrome:{transform:n,fallback:""}}),e.before("render",function(){this.params.chrome.hideFooter&&this.sandbox.addRootClass("var-footerless")})}},86:function(e,t,i){var n=i(171);e.exports=n.build([i(213),i(196),i(197),i(184),i(198),i(199),i(200),i(201),i(216),i(203),i(204),i(205),i(181),i(188),i(206),i(220),i(208)],{productName:"moment",pageForAudienceImpression:"moment",breakpoints:[330,430,550,660,820,970]})}}]);